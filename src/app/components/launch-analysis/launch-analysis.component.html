<div class="modal" [class.is-active]="show">
  <div class="modal-background"></div>
  <div class="modal-card">
    <header class="modal-card-head">
      <p class="modal-card-title" *ngIf="target === 'drug'">
        <span class="icon"><i class="fa fa-capsules"></i></span>
        Find Drugs
      </p>
      <p class="modal-card-title" *ngIf="target === 'drug-target'">
        <span class="icon"><i class="fa fa-crosshairs"></i></span>
        Find Drug Targets
      </p>
      <button (click)="close()" class="delete" aria-label="close"></button>
    </header>
    <section class="modal-card-body">
      <div class="tabs is-toggle is-small is-fullwidth is-rounded has-tooltip">
        <ul>
          <li [class.is-active]="algorithm === algo.slug" *ngFor="let algo of algorithms">
            <a (click)="algorithm = algo.slug" class="is-boxed is-medium">{{algo.name}}</a>
          </li>
        </ul>
      </div>

      <div *ngIf="target === 'drug' && hasBaits">
        <div class="notification is-warning warning">
          You have selected <i class="fa fa-virus"></i> viral proteins.
          When finding drugs, make sure you have selected <i class="fa fa-dna"></i> host proteins only.
        </div>
      </div>

      <div *ngIf="!analysis.canLaunchTask()">
        <div class="notification is-warning warning">
          You can only run {{maxTasks}} tasks at once. Please wait for one of them to finish or delete it from the task
          list.
        </div>
      </div>

      <div *ngIf="algorithm==='trustrank'">
        <div class="field" *ngIf="target === 'drug'">
          <label class="label">Indirect Drugs</label>
          <app-toggle textOn="Include" textOff="Ignore" tooltipOn="Include indirect drugs."
                      tooltipOff="Exclude indirect drugs from the result." icon="fa-check"
                      [(value)]="trustrankIncludeIndirectDrugs"></app-toggle>
        </div>
        <div class="field" *ngIf="target === 'drug'">
          <label class="label">Non-approved Drugs</label>
          <app-toggle textOn="Include" textOff="Ignore" tooltipOn="Include non-approved drugs."
                      tooltipOff="Exclude non-approved drugs from the result." icon="fa-check"
                      [(value)]="trustrankIncludeNonApprovedDrugs"></app-toggle>
        </div>
        <div class="field">
          <label class="label" for="trustrank-df">Damping Factor</label>
          <div class="control">
            <input [(ngModel)]="trustrankDampingFactor" id="trustrank-df" class="input" type="number"
                   placeholder="Damping factor"
                   min="0" max="1"
                   required>
          </div>
        </div>
        <div class="field">
          <label class="label" for="trustrank-rs">Result Size</label>
          <div class="control">
            <input [(ngModel)]="trustrankResultSize" id="trustrank-rs" class="input" type="number"
                   placeholder="Result size" required>
          </div>
        </div>
      </div>

      <div *ngIf="algorithm==='closeness'">
        <div class="field" *ngIf="target === 'drug'">
          <label class="label">Indirect Drugs</label>
          <app-toggle textOn="Include" textOff="Ignore" tooltipOn="Include indirect drugs."
                      tooltipOff="Exclude indirect drugs from the result." icon="fa-check"
                      [(value)]="closenessIncludeIndirectDrugs"></app-toggle>
        </div>
        <div class="field" *ngIf="target === 'drug'">
          <label class="label">Non-approved Drugs</label>
          <app-toggle textOn="Include" textOff="Ignore" tooltipOn="Include non-approved drugs."
                      tooltipOff="Exclude non-approved drugs from the result." icon="fa-check"
                      [(value)]="closenessIncludeNonApprovedDrugs"></app-toggle>
        </div>
        <div class="field">
          <label class="label" for="closeness-rs">Result Size</label>
          <div class="control">
            <input [(ngModel)]="closenessResultSize" id="closeness-rs" class="input" type="number"
                   placeholder="Result size" required>
          </div>
        </div>
      </div>

      <div *ngIf="algorithm==='degree'">
        <div class="field" *ngIf="target === 'drug'">
          <label class="label">Non-approved Drugs</label>
          <app-toggle textOn="Include" textOff="Ignore" tooltipOn="Include non-approved drugs."
                      tooltipOff="Exclude non-approved drugs from the result." icon="fa-check"
                      [(value)]="degreeIncludeNonApprovedDrugs"></app-toggle>
        </div>
        <div class="field">
          <label class="label" for="degree-rs">Result Size</label>
          <div class="control">
            <input [(ngModel)]="degreeResultSize" id="degree-rs" class="input" type="number"
                   placeholder="Result size" required>
          </div>
        </div>
      </div>

      <div *ngIf="algorithm==='keypathwayminer'">
        <div class="field">
          <label class="label" for="keypathwayminer-k">K</label>
          <div class="control">
            <div class="select">
              <select id="keypathwayminer-k" [(ngModel)]="keypathwayminerK">
                <option [ngValue]="1">1</option>
                <option [ngValue]="2">2</option>
                <option [ngValue]="3">3</option>
                <option [ngValue]="4">4</option>
                <option [ngValue]="5">5</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="algorithm==='multisteiner'">
        <div class="field">
          <label class="label" for="multisteiner-numtrees">Number of Steiner trees to return</label>
          <div class="control">
            <div class="select">
              <select id="multisteiner-numtrees" [(ngModel)]="multisteinerNumTrees">
                <option [ngValue]="1">1</option>
                <option [ngValue]="2">2</option>
                <option [ngValue]="3">3</option>
                <option [ngValue]="5">5</option>
                <option [ngValue]="10">10</option>
                <option [ngValue]="15">15</option>
                <option [ngValue]="20">20</option>
                <option [ngValue]="25">25</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer class="modal-card-foot">
      <button (click)="startTask(); close()" class="button is-success is-rounded has-tooltip"
              data-tooltip="Run the analysis."
              [disabled]="(target === 'drug' && hasBaits) || !analysis.canLaunchTask()">Launch
      </button>
      <button (click)="close()" class="button is-rounded has-tooltip" data-tooltip="Close the current window.">Close
      </button>
    </footer>
  </div>
</div>
